<html>
	<head></head>
	<body>
		<p id="msg"></p>
		<textarea id="t"></textarea>
		</p>
		<button onclick="clicked()">Send</button>

		<script>
			function clicked() {
				console.log("click2 " + t.value);

				ws.send(t.value);
			}
			var lastMsg = "";

			const ws = new WebSocket('ws://localhost:8080');
			var m = document.getElementById("msg");
			var t = document.getElementById("t");

			ws.onerror = console.error;

			ws.onopen = function open() {
				ws.send('client connected');
			};

			ws.onmessage = function message(data) {
				lastMsg = data;
				m.textContent += data.data + "\r\n";
				console.log('received: %s', data);
			};
		</script>
	</body>
</html>
